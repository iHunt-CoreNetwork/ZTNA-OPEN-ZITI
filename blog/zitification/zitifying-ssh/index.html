<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Zitifying SSH | OpenZiti</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://openziti.io/blog/zitification/zitifying-ssh"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="robots" content="index, follow"><meta data-rh="true" property="og:title" content="Zitifying SSH | OpenZiti"><meta data-rh="true" name="description" content="As we learned in the opening post, &quot;zitifying&quot; an application means to embed a Ziti SDK into an application and leverage the power of a Ziti Network to provide secure, truly zero-trust access to your application no matter where in the world that application goes. In this post we are going to see how we have zitified ssh and why. Future posts will expand on this even further by showing how NetFoundry uses zssh to support our customers."><meta data-rh="true" property="og:description" content="As we learned in the opening post, &quot;zitifying&quot; an application means to embed a Ziti SDK into an application and leverage the power of a Ziti Network to provide secure, truly zero-trust access to your application no matter where in the world that application goes. In this post we are going to see how we have zitified ssh and why. Future posts will expand on this even further by showing how NetFoundry uses zssh to support our customers."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-01-15T15:50:26.000Z"><meta data-rh="true" property="article:author" content="https://github.com/dovholuknf"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://openziti.io/blog/zitification/zitifying-ssh"><link data-rh="true" rel="alternate" href="https://openziti.io/blog/zitification/zitifying-ssh" hreflang="en"><link data-rh="true" rel="alternate" href="https://openziti.io/blog/zitification/zitifying-ssh" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://EXWPKK5PV4-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="OpenZiti RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="OpenZiti Atom Feed">


<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-5SF399H3",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>




<link rel="search" type="application/opensearchdescription+xml" title="OpenZiti" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.d43ad171.css">
<link rel="preload" href="/assets/js/runtime~main.41a72e54.js" as="script">
<link rel="preload" href="/assets/js/main.74d206c6.js" as="script">
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5SF399H3" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>



<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="root_VOM9"><span style="color:whitesmoke">Star us on GitHubÂ </span><span style="height:20px"><span><a href="https://github.com/openziti/ziti" data-icon="octicon-star" data-show-count="true" aria-label="Star buttons/github-buttons on GitHub">Star</a></span></span></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://openziti.io" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/ziti-logo-dark.svg" alt="The OpenZiti logo, an open source zero trust network overlay" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/ziti-logo-light.svg" alt="The OpenZiti logo, an open source zero trust network overlay" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/learn/introduction/">Documentation</a><a class="navbar__item navbar__link" href="/docs/downloads">Downloads</a><a href="https://blog.openziti.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Links</a><ul class="dropdown__menu"><li><div class="text-divider"><p>Socials</p></div></li><li><a href="https://www.youtube.com/OpenZiti" target="_blank" title="OpenZiti on YouTube"><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="/img/yt.svg">YouTube</span></a></li><li><a href="https://twitter.com/OpenZiti" target="_blank" title="OpenZiti on Twitter"><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="/img/twit.svg">Twitter</span></a></li><li><a href="https://www.reddit.com/r/openziti" target="_blank" title="OpenZiti Subreddit"><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="/img/reddit-logo.png">Reddit</span></a></li><li><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="/img/ziggy.png"><a href="https://twitter.com/OpenZiggy" target="_blank" title="OpenZiggy on Twitter">Ziggy</a></span></li><li><div class="text-divider"><p>Other</p></div></li><li><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="/img/blog-icon.png"><a href="https://blog.openziti.io/" target="_blank" title="Blog">Blog</a></span></li><li><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="/img/oz-test-kitchen.png"><a href="https://github.com/openziti-test-kitchen" target="_blank" title="Git project for the test kitchen">Test Kitchen</a></span></li><li><a href="https://zeds.openziti.org" target="_blank" title="Developer Sandbox"><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="/img/zeds.png">ZEDS</span></a></li><li><a href="https://netfoundry.io/pricing/" target="_blank" title="NetFoundry-hosted Ziti"><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="/img/nf.svg">CloudZiti</span></a></li></ul></div><a href="https://openziti.discourse.group/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-discourse-link" title="Discourse"></a><a href="https://github.com/openziti/ziti" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" title="GitHub"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_eExm"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/articles">Articles</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/c-sdk-on-beaglebone">Building the Ziti C SDK and Sample Apps for arm (BeagleBone)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/bootstrapping-trust/part-01.encryption-everywhere">Bootstrapping Trust</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/bootstrapping-trust/part-02.a-primer-on-public-key-cryptography">Bootstrapping Trust</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/bootstrapping-trust/part-03.certificates">Bootstrapping Trust</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="As we learned in the opening post, &quot;zitifying&quot; an application means to embed a Ziti SDK into an application and leverage the power of a Ziti Network to provide secure, truly zero-trust access to your application no matter where in the world that application goes. In this post we are going to see how we have zitified ssh and why. Future posts will expand on this even further by showing how NetFoundry uses zssh to support our customers."><header><h1 class="title_f1Hy" itemprop="headline">Zitifying SSH</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-01-15T15:50:26.000Z" itemprop="datePublished">January 15, 2024</time> Â· <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/dovholuknf" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/46322585?v=4" alt="Clint Dovholuk" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/dovholuknf" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Clint Dovholuk</span></a></div><small class="avatar__subtitle" itemprop="description">OpenZiti Maintainer</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>As we learned in the <a href="/blog/zitification/">opening post</a>, &quot;zitifying&quot; an application means to embed a Ziti SDK into an application and leverage the power of a <a href="/docs/learn/introduction/">Ziti Network</a> to provide secure, truly zero-trust access to your application no matter where in the world that application goes. In this post we are going to see how we have zitified <code>ssh</code> and why. Future posts will expand on this even further by showing how NetFoundry uses <code>zssh</code> to support our customers.</p><iframe width="560" height="315" src="https://www.youtube.com/embed/WyZ8GRvtgGs" title="YouTube video player" allow="autoplay; picture-in-picture"></iframe><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-ssh">Why SSH?<a href="#why-ssh" class="hash-link" aria-label="Direct link to Why SSH?" title="Direct link to Why SSH?">â</a></h2><p>As I sit here typing these words, I can tell you&#x27;re skeptical. I can tell you&#x27;re wondering why in the world we would even attempt to mess with <code>ssh</code> at all. After all, <code>ssh</code> has been a foundation of the administration of not only home networks but also corporate networks and the internet itself. Surely if millions (billions?) of computers can interact every day safely and securely using <code>ssh</code> there is &quot;no need&quot; for us to be spending time zitifying <code>ssh</code> right? (Spoiler alert: wrong)</p><p>I&#x27;m sure you&#x27;ve guessed that this is not the case whatsoever. After all, attackers don&#x27;t leave <code>ssh</code> alone just because it&#x27;s not worth it to try! Put a machine on the open internet, expose <code>ssh</code> on port 22 and watch for yourself all the attempts to access <code>ssh</code> using known default/weak/bad passwords flood in. Attacks don&#x27;t only come from the internet either! Attacks from a single compromised machine on your network very well could behave in the same way as an outside attacker. This is particularly true for ransomware-style attacks as the compromised machine attempts to expand/multiply. The problems don&#x27;t just stop here either. DoS attacks, other zero-day type bugs and more are all waiting for any service sitting on the open internet.</p><p>A zitified <code>ssh</code> client is superior since the port used by <code>ssh</code> can be eliminated from the internet-based firewall preventing any connections whatsoever from any network client. In this configuration the <code>ssh</code> process is effectively &quot;
dark&quot;. The only way to <code>ssh</code> to a machine configured in this way is to have an identity authorized for that <a href="/docs/learn/introduction/">Ziti Network</a>.</p><p>It doesn&#x27;t stop there though. A Ziti Network mandates the use of a strong identity. You cannot access any services defined in a <a href="/docs/learn/introduction/">Ziti Network</a> without having gone through the enrollment process to create a strong identity used for bidirectional authentication and authorization. With Ziti, you can&#x27;t even connect to SSH without first being authorized to connect to the remote SSH server.</p><p>Contrast that to SSH. With SSH you need access the sshd port before starting the authentication process. This requires the port to be exposed to the network, exposing it to attack. With SSH you are also usually allowed to authenticate without providing a strong identity using a username and password. Even if you are choosing to use the more secure pub/private key authentication for SSH, the remote machine still needed the public key added to the authorized_keys file before allowing connections to it via SSH. This is all-too-often a step which a human will do, making the process of authorizing a user or revoking access relatively cumbersome. Ziti provides a secure, centralized location to manage authorization of users to services. Ziti makes it trivial to grant or revoke access to a given set of services to users immediately.</p><p>Lastly, Ziti provides support for continual authorization through the use of policy checks. These policy checks run continuously. If a user suddenly fails to meet a particular policy, access to the services provided via the <a href="/docs/learn/introduction/">Ziti Network</a> are revoked immediately.</p><p>Cool right? Let&#x27;s see how we did it and how you can do the same thing using a <a href="/docs/learn/introduction/">Ziti Network</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="overview-of-ssh---notice-how-port-22-is-open-to-inbound-connections">Overview of SSH - notice how port 22 is open to inbound connections:<a href="#overview-of-ssh---notice-how-port-22-is-open-to-inbound-connections" class="hash-link" aria-label="Direct link to Overview of SSH - notice how port 22 is open to inbound connections:" title="Direct link to Overview of SSH - notice how port 22 is open to inbound connections:">â</a></h4><p><img loading="lazy" alt="ssh-overview.svg" src="/assets/images/ssh-overview-45937eb23dc9f3295bd27452dda3b660.svg" width="723" height="249" class="img_ev3q"></p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-its-done">How It&#x27;s Done<a href="#how-its-done" class="hash-link" aria-label="Direct link to How It&#x27;s Done" title="Direct link to How It&#x27;s Done">â</a></h2><p>There are a few steps necessary before being able to use <code>zssh</code>:</p><ul><li>Establish a <a href="/docs/learn/quickstarts/network/hosted">Ziti Network</a></li><li>Create and enroll two Ziti Endpoints (one for our <code>ssh</code> server, one for the client)<ul><li>the <code>sshd</code> server will run <code>ziti-tunnel</code> for this demonstration. Conveniently it will run on the same machine I used to setup the <a href="/docs/learn/introduction/">Ziti Network</a>.</li><li>the client will run <code>zssh</code> from my local machine, and I&#x27;ll <code>zssh</code> to the other endpoint</li></ul></li><li>Create the <a href="/docs/learn/core-concepts/services/overview">Ziti Service</a> we&#x27;ll use and authorize the two endpoints to use this service</li><li>Use the <code>zssh</code> binary from the client side and the <code>ziti-tunnel</code> binary from the serving side to connect</li><li>Harden <code>sshd</code> further by removing port 22 from any internet-based firewall configuration (for example, from within the security-groups wizard in AWS) or by forcing <code>sshd</code> to only listen on <code>localhost/127.0.0.1</code></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="overview-of-zssh---notice-port-22-is-no-longer-open-to-inbound-connections">Overview of ZSSH - notice port 22 is no longer open to inbound connections:<a href="#overview-of-zssh---notice-port-22-is-no-longer-open-to-inbound-connections" class="hash-link" aria-label="Direct link to Overview of ZSSH - notice port 22 is no longer open to inbound connections:" title="Direct link to Overview of ZSSH - notice port 22 is no longer open to inbound connections:">â</a></h4><p><img loading="lazy" alt="zssh-overview.svg" src="/assets/images/zssh-overview-e793e9a4cdc8275a8375ff45d73d44c3.svg" width="723" height="249" class="img_ev3q"></p><p>After performing these steps you&#x27;ll have an <code>sshd</code> server that is dark to the internet. Accessing the server via <code>ssh</code>
must now occur using the Ziti Network. Since the service is no longer accessible directly through a network, it is no longer susceptible to the types of attacks mentioned previously!</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="zssh-in-action">Zssh in Action<a href="#zssh-in-action" class="hash-link" aria-label="Direct link to Zssh in Action" title="Direct link to Zssh in Action">â</a></h2><p>Once the prerequisites are satisfied, we can see <code>zssh</code> in action. Simply download the binary for your platform:</p><ul><li><a href="https://github.com/openziti-test-kitchen/zssh/releases/latest/download/zssh-linux-amd64" target="_blank" rel="noopener noreferrer">linux</a></li><li><a href="https://github.com/openziti-test-kitchen/zssh/releases/latest/download/zssh-windows-amd64.exe" target="_blank" rel="noopener noreferrer">windows</a></li><li><a href="https://github.com/openziti-test-kitchen/zssh/releases/latest/download/zssh-macos-amd64" target="_blank" rel="noopener noreferrer">MacOs</a></li></ul><p>Once you have the executable download, make sure it is named <code>zssh</code> and for simplicity&#x27;s sake we&#x27;ll assume it&#x27;s on the path. A goal for <code>zssh</code> is to make the usage of the command very similar to the usage of <code>ssh</code>. Anyone familiar with <code>ssh</code> should be able to pick up <code>zssh</code> easily. As with most tooling, executing the binary with no arguments will display the expected usage. The general format when using <code>zssh</code> will be similar to that of <code>ssh</code>: <code>zssh &lt;remoteUsername&gt;@&lt;targetIdentity&gt;</code></p><p>Below you can see me <code>zssh</code> from my local machine to the AWS machine secured by <code>ziti-tunnel</code>:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./zssh ubuntu@ziti-tunnel-aws</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO[0000] connection to edge router using token 95c45123-9415-49d6-930a-275ada9ae06f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">connected.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ubuntu@ip-172-31-27-154:~$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It really was that simple! Now let&#x27;s break down the current flags for <code>zssh</code> and exactly how this worked.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="zssh-flags">Zssh Flags<a href="#zssh-flags" class="hash-link" aria-label="Direct link to Zssh Flags" title="Direct link to Zssh Flags">â</a></h2><p>We know that <code>zssh</code> requires access to a <a href="/docs/learn/introduction/">Ziti Network</a> but it is not clear from the example above is where <code>zzsh</code>
found the credentials required to access the network. <code>zssh</code> supports three basic flags:</p><p>-i, --SshKeyPath string Path to ssh key. default: $HOME/.ssh/id_rsa -c, --ZConfig string Path to ziti config file. default: $HOME/.ziti/zssh.json -d, --debug pass to enable additional debug information -h, --help help for this command -s, --service string service name. default: zssh (default &quot;zssh&quot;)</p><p>What you see above is exactly the output <code>zssh</code> provides should you pass the <code>-h/--help</code> flag or execute <code>zssh</code> without any parameters. The <code>-i/--SshKeyPath</code> flag is congruent to the <code>-i</code> flag for <code>ssh</code>. You would use it to supply your key to the <code>ssh</code> client. Under the hood of <code>zssh</code> is a full-fledged <code>ssh</code> client that works similarly to how <code>ssh</code> does. If your <code>~/.ssh/id_rsa</code> file is in the <code>authorized_keys</code> of the remote machine, then you won&#x27;t need to specify the <code>-i/</code>
flag (as I didn&#x27;t in my example). Using <code>zssh</code> requires the use of a public/private key in order for the <code>zssh</code> client to connect to the remote machine.</p><p>The <code>-c/--ZConfig</code> flag controls access to the network. A configuration file must be supplied to use <code>zssh</code> but does not need to be supplied as part of the command. By default, <code>zssh</code> will look at your home directory in a folder named <code>.ziti</code> for a file named <code>zssh.json</code>. In bash this is would be the equivalent of <code>$HOME</code>. In Windows this is the equivalent the environment variable named <code>USERPROFILE</code>. You do not need to supply this flag if a file exists at the default location. You can specify this flag to use <code>zssh</code> with other networks.</p><p>The <code>-s/--service</code> flag is for passing in a different service name other than &quot;zssh&quot;. By default, the service name will be &quot;zssh&quot;, but if you would like to access a different service use the <code>-s</code> flag followed by the service name.</p><p>The <code>-d/--debug</code> flag outputs additional information to assist you with debugging. For example:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./zssh ubuntu@ziti-tunnel-aws -d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO[0000]     sshKeyPath set to: /home/myUser/.ssh/id_rsa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO[0000]        ZConfig set to: /home/myUser/.ziti/zssh.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO[0000]       username set to: ubuntu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO[0000] targetIdentity set to: ziti-tunnel-aws</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO[0000] connection to edge router using token 95c45123-a234-412e-8997-96139fbd1938</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">connected.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ubuntu@ip-172-31-27-154:~$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Shown above is also one additional piece of information, the remote username. Shown in the example above I have <code>zssh</code>ed to an ubuntu image in AWS. When it was provisioned AWS used the username <code>ubuntu</code>. In order to <code>zssh</code> to this machine I need to tell the remote <code>sshd</code> server that I wish to attach as the <code>ubuntu</code> user. If your username is the same for your local environment as the remote machine you do not need to specify the username. For example, my local username is <code>cd</code> (my initials). When I <code>zssh</code> to my dev machine I can simply use <code>zssh ClintLinux</code>:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./zssh ClintLinux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO[0000] connection to edge router using token 909dfb4f-fa83-4f73-af8e-ed251bcd30be</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">connected.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd@clint-linux-vm ~</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Hopefully this post has been helpful and insightful. Zitifying an application is <em>POWERFUL</em>!!!!</p><p>The next post in this series will cover how we extended the same code we used for <code>zssh</code> and <a href="/blog/zitification/zitifying-scp/">zitified scp</a>.</p><p>Have a look at the code over at <a href="https://github.com/openziti-test-kitchen/zssh/tree/main/zssh/zssh" target="_blank" rel="noopener noreferrer">GitHub</a></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/zitification/zitifying-scp/zscp-cheatsheat"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">zscp Cheat Sheet</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/zitification/zitifying-ssh/zssh-cheat-sheet"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">zssh Cheat Sheet</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-ssh" class="table-of-contents__link toc-highlight">Why SSH?</a></li><li><a href="#how-its-done" class="table-of-contents__link toc-highlight">How It&#39;s Done</a></li><li><a href="#zssh-in-action" class="table-of-contents__link toc-highlight">Zssh in Action</a></li><li><a href="#zssh-flags" class="table-of-contents__link toc-highlight">Zssh Flags</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a class="footer__link-item" href="/policies/CODE_OF_CONDUCT">Policies</a><span class="footer__link-separator">Â·</span><a href="https://netfoundry.io/pricing/" target="_blank" rel="noopener noreferrer" class="footer__link-item">CloudZiti</a><span class="footer__link-separator">Â·</span><a href="https://blog.openziti.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 NetFoundry Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.41a72e54.js"></script>
<script src="/assets/js/main.74d206c6.js"></script>
</body>
</html>