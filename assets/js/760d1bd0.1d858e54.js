"use strict";(self.webpackChunkopen_ziti=self.webpackChunkopen_ziti||[]).push([[2873],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var a=n(67294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=u(n),m=l,g=d["".concat(s,".").concat(m)]||d[m]||c[m]||r;return n?a.createElement(g,i(i({ref:t},p),{},{components:n})):a.createElement(g,i({ref:t},p))}));function g(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,i=new Array(r);i[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[d]="string"==typeof e?e:l,i[1]=o;for(var u=2;u<r;u++)i[u]=n[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},65471:(e,t,n)=>{n.d(t,{Z:()=>h});var a=n(87462),l=n(67294),r=n(86010),i=n(72389),o=n(86043);const s={details:"details_lb9f",isBrowser:"isBrowser_bmU9",collapsibleContent:"collapsibleContent_i85q"};function u(e){return!!e&&("SUMMARY"===e.tagName||u(e.parentElement))}function p(e,t){return!!e&&(e===t||p(e.parentElement,t))}function d(e){let{summary:t,children:n,...d}=e;const c=(0,i.Z)(),m=(0,l.useRef)(null),{collapsed:g,setCollapsed:h}=(0,o.u)({initialState:!d.open}),[k,b]=(0,l.useState)(d.open),f=l.isValidElement(t)?t:l.createElement("summary",null,t??"Details");return l.createElement("details",(0,a.Z)({},d,{ref:m,open:k,"data-collapsed":g,className:(0,r.Z)(s.details,c&&s.isBrowser,d.className),onMouseDown:e=>{u(e.target)&&e.detail>1&&e.preventDefault()},onClick:e=>{e.stopPropagation();const t=e.target;u(t)&&p(t,m.current)&&(e.preventDefault(),g?(h(!1),b(!0)):h(!0))}}),f,l.createElement(o.z,{lazy:!1,collapsed:g,disableSSRStyle:!0,onCollapseTransitionEnd:e=>{h(e),b(!e)}},l.createElement("div",{className:s.collapsibleContent},n)))}const c={details:"details_b_Ee"},m="alert alert--info";function g(e){let{...t}=e;return l.createElement(d,(0,a.Z)({},t,{className:(0,r.Z)(m,c.details,t.className)}))}function h(e){const t=l.Children.toArray(e.children),n=t.find((e=>l.isValidElement(e)&&"summary"===e.props?.mdxType)),r=l.createElement(l.Fragment,null,t.filter((e=>e!==n)));return l.createElement(g,(0,a.Z)({},e,{summary:n}),r)}},85162:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(67294),l=n(86010);const r={tabItem:"tabItem_Ymn6"};function i(e){let{children:t,hidden:n,className:i}=e;return a.createElement("div",{role:"tabpanel",className:(0,l.Z)(r.tabItem,i),hidden:n},t)}},74866:(e,t,n)=>{n.d(t,{Z:()=>N});var a=n(87462),l=n(67294),r=n(86010),i=n(12466),o=n(16550),s=n(91980),u=n(67392),p=n(50012);function d(e){return function(e){return l.Children.map(e,(e=>{if(!e||(0,l.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:l}}=e;return{value:t,label:n,attributes:a,default:l}}))}function c(e){const{values:t,children:n}=e;return(0,l.useMemo)((()=>{const e=t??d(n);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function m(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function g(e){let{queryString:t=!1,groupId:n}=e;const a=(0,o.k6)(),r=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,s._X)(r),(0,l.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(a.location.search);t.set(r,e),a.replace({...a.location,search:t.toString()})}),[r,a])]}function h(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,r=c(e),[i,o]=(0,l.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:r}))),[s,u]=g({queryString:n,groupId:a}),[d,h]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,r]=(0,p.Nk)(n);return[a,(0,l.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:a}),k=(()=>{const e=s??d;return m({value:e,tabValues:r})?e:null})();(0,l.useLayoutEffect)((()=>{k&&o(k)}),[k]);return{selectedValue:i,selectValue:(0,l.useCallback)((e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),h(e)}),[u,h,r]),tabValues:r}}var k=n(72389);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function f(e){let{className:t,block:n,selectedValue:o,selectValue:s,tabValues:u}=e;const p=[],{blockElementScrollPositionUntilNextRender:d}=(0,i.o5)(),c=e=>{const t=e.currentTarget,n=p.indexOf(t),a=u[n].value;a!==o&&(d(t),s(a))},m=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=p.indexOf(e.currentTarget)+1;t=p[n]??p[0];break}case"ArrowLeft":{const n=p.indexOf(e.currentTarget)-1;t=p[n]??p[p.length-1];break}}t?.focus()};return l.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:i}=e;return l.createElement("li",(0,a.Z)({role:"tab",tabIndex:o===t?0:-1,"aria-selected":o===t,key:t,ref:e=>p.push(e),onKeyDown:m,onClick:c},i,{className:(0,r.Z)("tabs__item",b.tabItem,i?.className,{"tabs__item--active":o===t})}),n??t)})))}function y(e){let{lazy:t,children:n,selectedValue:a}=e;const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=r.find((e=>e.props.value===a));return e?(0,l.cloneElement)(e,{className:"margin-top--md"}):null}return l.createElement("div",{className:"margin-top--md"},r.map(((e,t)=>(0,l.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function v(e){const t=h(e);return l.createElement("div",{className:(0,r.Z)("tabs-container",b.tabList)},l.createElement(f,(0,a.Z)({},e,t)),l.createElement(y,(0,a.Z)({},e,t)))}function N(e){const t=(0,k.Z)();return l.createElement(v,(0,a.Z)({key:String(t)},e))}},54869:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>u,default:()=>h,frontMatter:()=>s,metadata:()=>p,toc:()=>c});var a=n(87462),l=(n(67294),n(3905)),r=n(74866),i=n(85162),o=n(65471);const s={title:"Linux Tunneller"},u=void 0,p={unversionedId:"reference/tunnelers/linux/index",id:"reference/tunnelers/linux/index",title:"Linux Tunneller",description:"The purpose of the tunneller is to configure host access. This means all users and all processes on the host will share",source:"@site/docs/reference/tunnelers/linux/index.md",sourceDirName:"reference/tunnelers/linux",slug:"/reference/tunnelers/linux/",permalink:"/docs/reference/tunnelers/linux/",draft:!1,editUrl:"https://github.com/openziti/ziti-doc/tree/main/docusaurus/docs/reference/tunnelers/linux/index.md",tags:[],version:"current",frontMatter:{title:"Linux Tunneller"},sidebar:"docsSidebar",previous:{title:"iOS",permalink:"/docs/reference/tunnelers/iOS"},next:{title:"Containers",permalink:"/docs/reference/tunnelers/linux/container/"}},d={},c=[{value:"Install Linux Package",id:"install-linux-package",level:2},{value:"Installing the DEB",id:"installing-the-deb",level:3},{value:"Ubuntu",id:"ubuntu",level:4},{value:"Debian GNU/Linux",id:"debian-gnulinux",level:4},{value:"Installing the RPM",id:"installing-the-rpm",level:3},{value:"Red Hat",id:"red-hat",level:4},{value:"Fedora",id:"fedora",level:4},{value:"Amazon Linux",id:"amazon-linux",level:4},{value:"Manual Installation",id:"manual-installation",level:2},{value:"Run the Manually Installed Binary",id:"run-the-manually-installed-binary",level:3},{value:"Adding Identities",id:"adding-identities",level:2},{value:"Add a Single Identity",id:"add-a-single-identity",level:3},{value:"Load Identities Directory",id:"load-identities-directory",level:3},{value:"Run with Docker",id:"run-with-docker",level:2},{value:"Install a Pre-Release",id:"install-a-pre-release",level:2},{value:"DEB Pre-Release",id:"deb-pre-release",level:3},{value:"RPM Pre-Release",id:"rpm-pre-release",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2}],m={toc:c},g="wrapper";function h(e){let{components:t,...n}=e;return(0,l.kt)(g,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"The purpose of the tunneller is to configure host access. This means all users and all processes on the host will share\nthe same level of access. This is accomplished by configuring the OS to have an OpenZiti DNS nameserver and IP routes\nfor authorized OpenZiti Services."),(0,l.kt)("h2",{id:"install-linux-package"},"Install Linux Package"),(0,l.kt)("p",null,"Reasons to use the package:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Install the tunneller as a systemd service."),(0,l.kt)("li",{parentName:"ol"},"Create permissions and policies for the tunneller to run as a non-root user."),(0,l.kt)("li",{parentName:"ol"},"Automatically enroll the identity and clean up the enrollment token in identity directory."),(0,l.kt)("li",{parentName:"ol"},"Automatically upgrade the tunneller when a new package is available.")),(0,l.kt)("p",null,"Linux DEB packages are currently available for the x86_64 and arm64 platforms and RPM packages are available for x86_64.\nARM/v7 (32bit) binaries are available from GitHub. See ",(0,l.kt)("a",{parentName:"p",href:"#manual-installation"},"manual installation"),"."),(0,l.kt)("h3",{id:"installing-the-deb"},"Installing the DEB"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Select an OS to see the appropriate steps.")),(0,l.kt)(r.Z,{defaultValue:"Ubuntu",values:[{label:"Ubuntu",value:"Ubuntu"},{label:"Debian GNU/Linux",value:"Debian"}],mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"Ubuntu",mdxType:"TabItem"},(0,l.kt)("h4",{id:"ubuntu"},"Ubuntu"),(0,l.kt)("p",null,"Packages are available for all Ubuntu releases since 18.04 (Bionic)."),(0,l.kt)("br",null),(0,l.kt)("p",null,"Architectures available:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"x86_64"),(0,l.kt)("li",{parentName:"ul"},"arm64")),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"Please read this script to ensure it is safe before running it.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"curl -sSLf https://get.openziti.io/tun/scripts/install-ubuntu.bash | bash\n"))),(0,l.kt)(i.Z,{value:"Debian",mdxType:"TabItem"},(0,l.kt)("h4",{id:"debian-gnulinux"},"Debian GNU/Linux"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Debian"),(0,l.kt)("th",{parentName:"tr",align:null},"Ubuntu"),(0,l.kt)("th",{parentName:"tr",align:null},"Archs"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"12 Bookworm"),(0,l.kt)("td",{parentName:"tr",align:null},"Jammy 22.04"),(0,l.kt)("td",{parentName:"tr",align:null},"x86_64, arm64")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"11 Bullseye"),(0,l.kt)("td",{parentName:"tr",align:null},"Focal 20.04"),(0,l.kt)("td",{parentName:"tr",align:null},"x86_64, arm64")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"10 Buster"),(0,l.kt)("td",{parentName:"tr",align:null},"Bionic 18.04"),(0,l.kt)("td",{parentName:"tr",align:null},"x86_64")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"9 Stretch"),(0,l.kt)("td",{parentName:"tr",align:null},"Xenial 16.04"),(0,l.kt)("td",{parentName:"tr",align:null},"x86_64")))),(0,l.kt)("p",null,"Refer to the table to find the Ubuntu release name that is the contemporary of the Debian release. Substitute the Ubuntu\nrelease name for ",(0,l.kt)("inlineCode",{parentName:"p"},"focal")," in the ",(0,l.kt)("inlineCode",{parentName:"p"},"/etc/apt/sources.list.d/openziti.list")," file."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"(\nUBUNTU_LTS=focal\n\nset -euo pipefail\n\ncurl -sSLf https://get.openziti.io/tun/package-repos.gpg \\\n  | sudo gpg --dearmor --output /usr/share/keyrings/openziti.gpg\nsudo chmod -c +r /usr/share/keyrings/openziti.gpg\n\necho 'deb [signed-by=/usr/share/keyrings/openziti.gpg] https://packages.openziti.org/zitipax-openziti-deb-stable $UBUNTU_LTS main' \\\n  | sudo tee /etc/apt/sources.list.d/openziti.list >/dev/null\n\nsudo apt update\nsudo apt install ziti-edge-tunnel\n)\n")))),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Enable and start the service"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-text"},"sudo systemctl enable --now ziti-edge-tunnel.service\n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"#adding-identities"},"Add an Identity")))),(0,l.kt)("h3",{id:"installing-the-rpm"},"Installing the RPM"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Create a repo file like ",(0,l.kt)("inlineCode",{parentName:"li"},"/etc/yum.repos.d/openziti.repo")," matching the OS.")),(0,l.kt)(r.Z,{defaultValue:"RedHat",values:[{label:"Red Hat",value:"RedHat"},{label:"Fedora",value:"Fedora"},{label:"Amazon Linux",value:"Amazon"}],mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"RedHat",mdxType:"TabItem"},(0,l.kt)("h4",{id:"red-hat"},"Red Hat"),(0,l.kt)("p",null,"Architectures available:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"x86_64")),(0,l.kt)("p",null,"Use this repo with var ",(0,l.kt)("inlineCode",{parentName:"p"},"$releasever")," on CentOS 7, Rocky 8-9, and RHEL 7-9."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"[OpenZiti]\nname=OpenZiti\nbaseurl=https://packages.openziti.org/zitipax-openziti-rpm-stable/redhat$releasever/$basearch\nenabled=1\ngpgcheck=0\ngpgkey=https://packages.openziti.org/zitipax-openziti-rpm-stable/redhat$releasever/$basearch/repodata/repomd.xml.key\nrepo_gpgcheck=1\n"))),(0,l.kt)(i.Z,{value:"Fedora",mdxType:"TabItem"},(0,l.kt)("h4",{id:"fedora"},"Fedora"),(0,l.kt)("p",null,"Architectures available:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"x86_64")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"[OpenZiti]\nname=OpenZiti\nbaseurl=https://packages.openziti.org/zitipax-openziti-rpm-stable/redhat9/$basearch\nenabled=1\ngpgcheck=0\ngpgkey=https://packages.openziti.org/zitipax-openziti-rpm-stable/redhat9/$basearch/repodata/repomd.xml.key\nrepo_gpgcheck=1\n"))),(0,l.kt)(i.Z,{value:"Amazon",mdxType:"TabItem"},(0,l.kt)("h4",{id:"amazon-linux"},"Amazon Linux"),(0,l.kt)("p",null,"Architectures available:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"x86_64")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"[OpenZiti]\nname=OpenZiti\nbaseurl=https://packages.openziti.org/zitipax-openziti-rpm-stable/redhat8/$basearch\nenabled=1\ngpgcheck=0\ngpgkey=https://packages.openziti.org/zitipax-openziti-rpm-stable/redhat8/$basearch/repodata/repomd.xml.key\nrepo_gpgcheck=1\n")))),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Run ",(0,l.kt)("inlineCode",{parentName:"p"},"sudo yum update")," to refresh the repo data cache.")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Run ",(0,l.kt)("inlineCode",{parentName:"p"},"sudo yum install ziti-edge-tunnel")," to install the RPM.")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Enable and start the service"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-text"},"sudo systemctl enable --now ziti-edge-tunnel.service\n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"#adding-identities"},"Add an Identity")))),(0,l.kt)("h2",{id:"manual-installation"},"Manual Installation"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/openziti/ziti-tunnel-sdk-c/releases/latest/"},"The latest binary release")," of ",(0,l.kt)("inlineCode",{parentName:"p"},"ziti-edge-tunnel")," is\ndistributed as an executable for amd64, arm, and arm64 architectures. To upgrade the tunneller perform the installation\nprocedure again."),(0,l.kt)("p",null,"Install the ",(0,l.kt)("inlineCode",{parentName:"p"},"wget")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"unzip")," commands to use this example."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"(set -euo pipefail\ncd $(mktemp -d)\nwget -q \\\n  \"https://github.com/openziti/ziti-tunnel-sdk-c/releases/latest/download/ziti-edge-tunnel-Linux_$(uname -m).zip\"\nunzip ./ziti-edge-tunnel-Linux_$(uname -m).zip\nsudo install -o root -g root ./ziti-edge-tunnel /usr/local/bin/\ngrep -q '^ziti:' /etc/group || sudo groupadd --system ziti\nsudo mkdir -pv /opt/openziti/etc/identities\nziti-edge-tunnel version\n)\n")),(0,l.kt)("h3",{id:"run-the-manually-installed-binary"},"Run the Manually Installed Binary"),(0,l.kt)("p",null,"You must run the manually-installed tunneller as root because only the Linux package configures systemd ambient\ncapabilities that enable managing DNS and IP routes with reduced privileges."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"sudo ziti-edge-tunnel run --identity-dir /opt/openziti/etc/identities\n")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"/docs/reference/tunnelers/linux/linux-tunnel-options"},"Learn more about tunneller options and modes"),"."),(0,l.kt)("h2",{id:"adding-identities"},"Adding Identities"),(0,l.kt)("p",null,"The tunneller can run with zero or more identities loaded, and needs at least one to make OpenZiti services available on\nthe host. Adding an identity means providing a JWT enrollment token which is used by the tunneller to obtain a client\ncertificate from the OpenZiti controller. ",(0,l.kt)("a",{parentName:"p",href:"/docs/learn/core-concepts/identities/overview"},"Learn more about OpenZiti Identities"),"."),(0,l.kt)("h3",{id:"add-a-single-identity"},"Add a Single Identity"),(0,l.kt)("p",null,"Root and members of group ",(0,l.kt)("inlineCode",{parentName:"p"},"ziti")," may add an identity without restarting. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'sudo ziti-edge-tunnel add --jwt "$(< ./in-file.jwt)" --identity myIdentityName\n')),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"/docs/learn/core-concepts/identities/enrolling"},"Learn more about enrolling"),"."),(0,l.kt)("h3",{id:"load-identities-directory"},"Load Identities Directory"),(0,l.kt)("p",null,"The tunneller will load all enrolled identities in the ",(0,l.kt)("inlineCode",{parentName:"p"},"--identity-dir")," directory at startup. The default location for\nidentities is is ",(0,l.kt)("inlineCode",{parentName:"p"},"/opt/openziti/etc/identities"),". Add enrolled identity files to this directory by copying the JSON file\ninto the directory and setting permissions for group ",(0,l.kt)("inlineCode",{parentName:"p"},"ziti"),"."),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"Linux package users may place enrollment tokens named ",(0,l.kt)("inlineCode",{parentName:"p"},"*.jwt")," in this directory for automatic enrollment at next\nstartup.")),(0,l.kt)("p",null,"Ensure the identities directory is writable by group ",(0,l.kt)("inlineCode",{parentName:"p"},"ziti")," and not readable by others to protect the confidentiality of\nthe identities."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"sudo chown -cR :ziti        /opt/openziti/etc/identities\nsudo chmod -cR ug=rwX,o-rwx /opt/openziti/etc/identities\n")),(0,l.kt)("p",null,"The tunneller process needs to be restarted if the contents of ",(0,l.kt)("inlineCode",{parentName:"p"},"/opt/openziti/etc/identities")," change."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"# package users can restart with systemd\nsudo systemctl restart ziti-edge-tunnel.service\n")),(0,l.kt)("h2",{id:"run-with-docker"},"Run with Docker"),(0,l.kt)("p",null,"Reference ",(0,l.kt)("a",{parentName:"p",href:"/docs/reference/tunnelers/linux/container/"},"the article about running the Linux tunneller in a container")," for guidance and\nexamples."),(0,l.kt)("h2",{id:"install-a-pre-release"},"Install a Pre-Release"),(0,l.kt)("h3",{id:"deb-pre-release"},"DEB Pre-Release"),(0,l.kt)(o.Z,{mdxType:"Details"},(0,l.kt)("summary",null,"Pre-release repo for Debian-based distros"),(0,l.kt)("p",null,"You may use the following script to install the pre-release version of the tunneller for any supported Ubuntu LTS."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"(set -euo pipefail;\nUBUNTU_LTS=focal;\n\ncurl -sSLf https://get.openziti.io/tun/package-repos.gpg \\\n| sudo gpg --dearmor --output /usr/share/keyrings/openziti.gpg;\nsudo chmod +r /usr/share/keyrings/openziti.gpg;\n\nsudo tee /etc/apt/sources.list.d/ziti-edge-tunnel-testing.list >/dev/null <<EOF;\ndeb [signed-by=/usr/share/keyrings/openziti.gpg] https://packages.openziti.org/zitipax-openziti-deb-test ${UBUNTU_LTS} main\nEOF\n\nsudo apt update;\nsudo apt install ziti-edge-tunnel;\n/opt/openziti/bin/ziti-edge-tunnel version;\n)\n"))),(0,l.kt)("h3",{id:"rpm-pre-release"},"RPM Pre-Release"),(0,l.kt)(o.Z,{mdxType:"Details"},(0,l.kt)("summary",null,"Pre-release repo for RedHat-based distros"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"(set -euo pipefail;\n\nsudo tee /etc/yum.repos.d/ziti-edge-tunnel-testing.repo >/dev/null <<\\EOF;\n[OpenZitiTunnelTesting]\nname=OpenZiti Tunnel Testing\nbaseurl=https://packages.openziti.org/zitipax-openziti-rpm-test/redhat$releasever/$basearch\nenabled=1\ngpgcheck=0\ngpgkey=https://packages.openziti.org/zitipax-openziti-rpm-test/redhat$releasever/$basearch/repodata/repomd.xml.key\nrepo_gpgcheck=1\nEOF\n\nsudo dnf update;\nsudo dnf install ziti-edge-tunnel;\n/opt/openziti/bin/ziti-edge-tunnel version;\n)\n"))),(0,l.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,l.kt)("p",null,"Refer to ",(0,l.kt)("a",{parentName:"p",href:"/docs/reference/tunnelers/linux/linux-tunnel-troubleshooting"},"the troubleshooting guide"),"."))}h.isMDXComponent=!0}}]);