<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-guides/kubernetes/hosting/kubernetes-controller" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Install OpenZiti Controller in Kubernetes | OpenZiti</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://openziti.io/docs/guides/kubernetes/hosting/kubernetes-controller"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="description" content="open source zero trust"><meta data-rh="true" name="robots" content="index, follow"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Install OpenZiti Controller in Kubernetes | OpenZiti"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://openziti.io/docs/guides/kubernetes/hosting/kubernetes-controller"><link data-rh="true" rel="alternate" href="https://openziti.io/docs/guides/kubernetes/hosting/kubernetes-controller" hreflang="en"><link data-rh="true" rel="alternate" href="https://openziti.io/docs/guides/kubernetes/hosting/kubernetes-controller" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://EXWPKK5PV4-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-5SF399H3",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>




<link rel="search" type="application/opensearchdescription+xml" title="OpenZiti" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.e0e4b00f.css">
<link rel="preload" href="/assets/js/runtime~main.3c8b2fbb.js" as="script">
<link rel="preload" href="/assets/js/main.47ca3b21.js" as="script">
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5SF399H3" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>



<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="root_VOM9"><span style="color:whitesmoke">Star us on GitHubÂ </span><span style="height:20px"><span><a href="https://github.com/openziti/ziti" data-icon="octicon-star" data-show-count="true" aria-label="Star buttons/github-buttons on GitHub">Star</a></span></span></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://openziti.io" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/ziti-logo-dark.svg" alt="The OpenZiti logo, an open source zero trust network overlay" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/ziti-logo-light.svg" alt="The OpenZiti logo, an open source zero trust network overlay" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/learn/introduction/">Documentation</a><a class="navbar__item navbar__link" href="/docs/downloads">Downloads</a><a href="https://blog.openziti.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Links</a><ul class="dropdown__menu"><li><div class="text-divider"><p>Socials</p></div></li><li><a href="https://www.youtube.com/OpenZiti" target="_blank" title="OpenZiti on YouTube"><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="/img/yt.svg">YouTube</span></a></li><li><a href="https://twitter.com/OpenZiti" target="_blank" title="OpenZiti on Twitter"><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="/img/twit.svg">Twitter</span></a></li><li><a href="https://www.reddit.com/r/openziti" target="_blank" title="OpenZiti Subreddit"><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="/img/reddit-logo.png">Reddit</span></a></li><li><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="/img/ziggy.png"><a href="https://twitter.com/OpenZiggy" target="_blank" title="OpenZiggy on Twitter">Ziggy</a></span></li><li><div class="text-divider"><p>Other</p></div></li><li><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="/img/blog-icon.png"><a href="https://blog.openziti.io/" target="_blank" title="Blog">Blog</a></span></li><li><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="/img/oz-test-kitchen.png"><a href="https://github.com/openziti-test-kitchen" target="_blank" title="Git project for the test kitchen">Test Kitchen</a></span></li><li><a href="https://zeds.openziti.org" target="_blank" title="Developer Sandbox"><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="/img/zeds.png">ZEDS</span></a></li><li><a href="https://netfoundry.io/pricing/" target="_blank" title="NetFoundry-hosted Ziti"><span id="navbarDropdownItem"><img id="navbarDropdownImage" src="/img/nf.svg">CloudZiti</span></a></li></ul></div><a href="https://openziti.discourse.group/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-discourse-link" title="Discourse"></a><a href="https://github.com/openziti/ziti" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" title="GitHub"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_eExm docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 sidebar-title"><a class="menu__link" href="/docs/learn/introduction/">LEARN</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/learn/introduction/">What is OpenZiti?</a><button aria-label="Toggle the collapsible sidebar category &#x27;What is OpenZiti?&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/learn/quickstarts/">Quickstarts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Quickstarts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/learn/core-concepts/">Core Concepts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Core Concepts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 sidebar-title"><a class="menu__link" href="/docs/reference/">REFERENCE</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/reference/config-types/">Builtin Config Types</a><button aria-label="Toggle the collapsible sidebar category &#x27;Builtin Config Types&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/reference/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/reference/tunnelers/">Tunnelers</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tunnelers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/reference/deployments/">Deployments</a><button aria-label="Toggle the collapsible sidebar category &#x27;Deployments&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/reference/configuration/conventions">Configuration</a><button aria-label="Toggle the collapsible sidebar category &#x27;Configuration&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/reference/developer/">Developer</a><button aria-label="Toggle the collapsible sidebar category &#x27;Developer&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/reference/glossary">Glossary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 sidebar-title"><a class="menu__link" href="/docs/guides/">GUIDES</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/local-gateway">Local Gateway</a><button aria-label="Toggle the collapsible sidebar category &#x27;Local Gateway&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/public-cloud-deployment">Public Cloud Deployment</a><button aria-label="Toggle the collapsible sidebar category &#x27;Public Cloud Deployment&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/data-flow-explainer">Data Flow Explainer</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/kubernetes">Kubernetes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Kubernetes&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/hosting-openziti">Hosting OpenZiti</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hosting OpenZiti&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/guides/kubernetes/hosting/kubernetes-controller">Controller</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/kubernetes/hosting/kubernetes-router">Router</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/kubernetes/hosting/kubernetes-console">Console</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/guides/kubernetes/workload-tunneling/">Workload Tunneling</a><button aria-label="Toggle the collapsible sidebar category &#x27;Workload Tunneling&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/guides/hsm/">Hardware Security Modules (HSM)</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hardware Security Modules (HSM)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/securing-apis">Securing APIs</a><button aria-label="Toggle the collapsible sidebar category &#x27;Securing APIs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/troubleshooting">Troubleshooting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Troubleshooting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/kubernetes"><span itemprop="name">Kubernetes</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/hosting-openziti"><span itemprop="name">Hosting OpenZiti</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Controller</span><meta itemprop="position" content="3"></li></ul></nav><div class="theme-doc-markdown markdown"><header><h1>Install OpenZiti Controller in Kubernetes</h1></header><h1>ziti-controller</h1><p><img loading="lazy" src="https://img.shields.io/badge/Version-0.7.3-informational?style=flat-square" alt="Version: 0.7.3" class="img_ev3q"> <img loading="lazy" src="https://img.shields.io/badge/Type-application-informational?style=flat-square" alt="Type: application" class="img_ev3q"> <img loading="lazy" src="https://img.shields.io/badge/AppVersion-0.30.4-informational?style=flat-square" alt="AppVersion: 0.30.4" class="img_ev3q"></p><p>Host an OpenZiti controller in Kubernetes</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">â</a></h2><table><thead><tr><th>Repository</th><th>Name</th><th>Version</th></tr></thead><tbody><tr><td><a href="https://charts.jetstack.io" target="_blank" rel="noopener noreferrer">https://charts.jetstack.io</a></td><td>cert-manager</td><td>~1.11.0</td></tr><tr><td><a href="https://charts.jetstack.io" target="_blank" rel="noopener noreferrer">https://charts.jetstack.io</a></td><td>trust-manager</td><td>~0.4.0</td></tr><tr><td><a href="https://kubernetes.github.io/ingress-nginx/" target="_blank" rel="noopener noreferrer">https://kubernetes.github.io/ingress-nginx/</a></td><td>ingress-nginx</td><td>~4.5.2</td></tr></tbody></table><p>Note that ingress-nginx is not strictly required, but the chart is parameterized to allow for conveniently declaring pass-through TLS.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">â</a></h2><p>This chart runs a Ziti controller in Kubernetes. It uses the custom resources provided by <a href="https://cert-manager.io/docs/installation/" target="_blank" rel="noopener noreferrer">cert-manager</a> and <a href="https://cert-manager.io/docs/projects/trust-manager/#installation" target="_blank" rel="noopener noreferrer">trust-manager</a>, i.e., Issuer, Certificate, and Bundle. Delete the controller pod after an upgrade for the new controller configuration to take effect.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements-1">Requirements<a href="#requirements-1" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">â</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-the-openziti-charts-repo-to-helm">Add the OpenZiti Charts Repo to Helm<a href="#add-the-openziti-charts-repo-to-helm" class="hash-link" aria-label="Direct link to Add the OpenZiti Charts Repo to Helm" title="Direct link to Add the OpenZiti Charts Repo to Helm">â</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm repo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> openziti https://docs.openziti.io/helm-charts/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This chart requires Certificate, Issuer, and Bundle resources to be applied before installing the chart. Sub-charts <code>cert-manager</code>, and <code>trust-manager</code> will be installed automatically. You may disable the sub-charts if you wish to provide these resources separately, but if you do so then please use the sub-chart values at the foot of Values.yaml to ensure those charts are correctly configured.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-required-custom-resource-definitions">Install Required Custom Resource Definitions<a href="#install-required-custom-resource-definitions" class="hash-link" aria-label="Direct link to Install Required Custom Resource Definitions" title="Direct link to Install Required Custom Resource Definitions">â</a></h3><p>This step satisfies Helm&#x27;s requirement that the CRDs used in the umbrella chart
already exist in Kubernetes before installing the controller chart.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f https://github.com/cert-manager/cert-manager/releases/latest/download/cert-manager.crds.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/cert-manager/trust-manager/v0.4.0/deploy/crds/trust.cert-manager.io_bundles.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="minimal-installation">Minimal Installation<a href="#minimal-installation" class="hash-link" aria-label="Direct link to Minimal Installation" title="Direct link to Minimal Installation">â</a></h2><p>This first example shows a minimal installation for a Kubernetes distribution that provides TLS pass-through for Service type LoadBalancer, e.g., K3S, Minikube.</p><p>You must supply one value when you install the chart.</p><table><thead><tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>clientApi.advertisedHost</td><td>string</td><td>nil</td><td>the DNS name that edge clients and routers will resolve to reach this controller&#x27;s edge client API</td></tr><tr><td>clientApi.advertisedPort</td><td>string</td><td>nil</td><td>the TCP port associated with the advertisedHost to advertise to edge clients and routers</td></tr></tbody></table><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --namespace ziti-controller ziti-controller-minimal1 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    openziti/ziti-controller </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --set clientApi.advertisedHost</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;ziti-controller-minimal.example.com&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --set clientApi.advertisedPort</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;443&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>A default admin user and password will be generated and saved to a secret during installation. The credentials can be retrieved using this command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get secret </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -n ziti-controller ziti-controller-minimal1-admin-secret </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -o go-template</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;{{range $k,$v := .data}}{{printf &quot;%s: &quot; $k}}{{if not $v}}{{$v}}{{else}}{{$v | base64decode}}{{end}}{{&quot;\n&quot;}}{{end}}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You may log in the <code>ziti</code> CLI with one command or omit the <code>-p</code> part to prompt:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ziti edge login ziti-controller-minimal.example.com:1280 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --yes </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --username admin </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --password </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">        kubectl -n ziti-controller </span><span class="token variable punctuation" style="color:#393A34">\</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">            get secrets ziti-controller-minimal1-admin-secret </span><span class="token variable punctuation" style="color:#393A34">\</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">                -o go-template</span><span class="token variable operator" style="color:#393A34">=</span><span class="token variable string" style="color:#e3116c">&#x27;{{index .data &quot;admin-password&quot; | base64decode }}&#x27;</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">        </span><span class="token variable" style="color:#36acaa">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="managed-kubernetes-installation">Managed Kubernetes Installation<a href="#managed-kubernetes-installation" class="hash-link" aria-label="Direct link to Managed Kubernetes Installation" title="Direct link to Managed Kubernetes Installation">â</a></h2><p>Managed Kubernetes providers typically configure server TLS for a Service of type LoadBalancer. Ziti needs pass-through TLS because edge clients and routers authenticate with client certificates. We&#x27;ll accomplish this by changing the Service type to ClusterIP and creating Ingress resources with pass-through TLS for each cluster service.</p><p>This example demonstrates creating TLS pass-through Ingress resources for use with <a href="https://docs.nginx.com/nginx-ingress-controller/installation/installing-nic/installation-with-helm/" target="_blank" rel="noopener noreferrer">ingress-nginx</a>.</p><p>Ensure you have the <code>ingress-nginx</code> chart installed with <code>controller.extraArgs.enable-ssl-passthrough=true</code>. You can verify this feature is enabled by running <code>kubectl describe pods {ingress-nginx-controller pod}</code> and checking the args for <code>--enable-ssl-passthrough=true</code>.</p><p>Create a Helm chart values file like this.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># /tmp/controller-values.yml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">clientApi</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">advertisedHost</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ziti</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">managed.example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">advertisedPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">443</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ingress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ingressClassName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">kubernetes.io/ingress.allow-http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;false&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/ssl-passthrough</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/secure-backends</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now install or upgrade this controller chart with your values file.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --namespace ziti-controller ziti-controller-managed1 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    openziti/ziti-controller </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --values /tmp/controller-values.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="expose-the-router-control-plane">Expose the Router Control Plane<a href="#expose-the-router-control-plane" class="hash-link" aria-label="Direct link to Expose the Router Control Plane" title="Direct link to Expose the Router Control Plane">â</a></h3><p>This is applicable if you have any routers outside the Ziti controller&#x27;s cluster. You must configure pass-through TLS LoadBalancer or Ingress for the control plane service. Routers running in the same cluster as the controller can use the cluster service named <code>{controller release}-ctrl</code> (the &quot;ctrl&quot; endpoint). This example demonstrates a pass-through Ingress resource for <code>nginx-ingress</code>.</p><p>Merge this with your Helm chart values file before installing or upgrading.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">ctrlPlane</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">advertisedHost</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ziti</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">managed</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ctrl.example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">advertisedPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">443</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ingress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ingressClassName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">kubernetes.io/ingress.allow-http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;false&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/ssl-passthrough</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/secure-backends</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="extra-security-for-the-management-api">Extra Security for the Management API<a href="#extra-security-for-the-management-api" class="hash-link" aria-label="Direct link to Extra Security for the Management API" title="Direct link to Extra Security for the Management API">â</a></h2><p>You can split the client and management APIs into separate cluster services by setting <code>managementApi.service.enabled=true</code>. With this configuration, you&#x27;ll have an additional cluster service named <code>{controller release}-mgmt</code> that is the management API, and the client API will not have management features.</p><p>This Helm chart&#x27;s values allow for both operational scenarios: combined and split. The default choice is to expose the combined client and management APIs as the cluster service named <code>{controller release}-client</code>, which is convenient because you can use the <code>ziti</code> CLI immediately. For additional security, you may shelter the management API by splitting these two sets of features, exposing them as separate API servers. After the split, you can access the management API in several ways:</p><ul><li>running the web console inside the cluster,</li><li>hosting a Ziti service, or</li><li><code>kubectl port-forward</code>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-pki">Advanced PKI<a href="#advanced-pki" class="hash-link" aria-label="Direct link to Advanced PKI" title="Direct link to Advanced PKI">â</a></h2><p>The default configuration generates a singular PKI root of trust for all the controller&#x27;s servers and the edge signer CA. Optionally, you may provide the name of a cert-manager Issuer or ClusterIssuer to become the root of trust for the Ziti controller&#x27;s identity.</p><p>Merge this with your Helm chart values file before installing or upgrading.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">ctrlPlane</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">issuer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterIssuer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">alternative</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cluster</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">issuer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You may also configure the Ziti controller to use separate PKI roots of trust for its three main identities: control plane, edge signer, and web bindings.</p><p>For example, to use a separate CA for the edge signer function, merge this with your Helm chart values file before installing or upgrading.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">edgeSignerPki</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="values-reference">Values Reference<a href="#values-reference" class="hash-link" aria-label="Direct link to Values Reference" title="Direct link to Values Reference">â</a></h2><table><thead><tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>additionalVolumes</td><td>list</td><td><code>[]</code></td><td>additional volumes to mount to ziti-controller container</td></tr><tr><td>affinity</td><td>object</td><td><code>{}</code></td><td>deployment template spec affinity</td></tr><tr><td>ca.clusterDomain</td><td>string</td><td><code>&quot;cluster.local&quot;</code></td><td>Set a custom cluster domain if other than cluster.local</td></tr><tr><td>ca.duration</td><td>string</td><td><code>&quot;87840h&quot;</code></td><td>Go time.Duration string format</td></tr><tr><td>ca.renewBefore</td><td>string</td><td><code>&quot;720h&quot;</code></td><td>Go time.Duration string format</td></tr><tr><td>cert-manager.enableCertificateOwnerRef</td><td>bool</td><td><code>true</code></td><td>clean up secret when certificate is deleted</td></tr><tr><td>cert-manager.enabled</td><td>bool</td><td><code>false</code></td><td>install the cert-manager subchart to provide CRDs Certificate, Issuer</td></tr><tr><td>cert-manager.installCRDs</td><td>bool</td><td><code>false</code></td><td>CRDs must be applied in advance of installing the parent chart</td></tr><tr><td>cert.duration</td><td>string</td><td><code>&quot;87840h&quot;</code></td><td>server certificate duration as Go time.Duration string format</td></tr><tr><td>cert.renewBefore</td><td>string</td><td><code>&quot;720h&quot;</code></td><td>rewnew server certificates before expiry as Go time.Duration string format</td></tr><tr><td>clientApi.advertisedHost</td><td>string</td><td><code>nil</code></td><td>global DNS name by which routers can resolve a reachable IP for this service</td></tr><tr><td>clientApi.advertisedPort</td><td>int</td><td><code>443</code></td><td>cluster service, node port, load balancer, and ingress port</td></tr><tr><td>clientApi.containerPort</td><td>int</td><td><code>1280</code></td><td>cluster service target port on the container</td></tr><tr><td>clientApi.dnsNames</td><td>list</td><td><code>[]</code></td><td>additional DNS SANs</td></tr><tr><td>clientApi.ingress.annotations</td><td>string</td><td><code>nil</code></td><td>ingress annotations, e.g., to configure ingress-nginx</td></tr><tr><td>clientApi.ingress.enabled</td><td>bool</td><td><code>false</code></td><td>create an ingress for the cluster service</td></tr><tr><td>clientApi.service.enabled</td><td>bool</td><td><code>true</code></td><td>create a cluster service for the deployment</td></tr><tr><td>clientApi.service.type</td><td>string</td><td><code>&quot;LoadBalancer&quot;</code></td><td>expose the service as a ClusterIP, NodePort, or LoadBalancer</td></tr><tr><td>configMountDir</td><td>string</td><td><code>&quot;/etc/ziti&quot;</code></td><td>read-only mountpoint where configFile and various read-only identity dirs are projected</td></tr><tr><td>ctrlPlane.advertisedHost</td><td>string</td><td><code>nil</code></td><td>global DNS name by which routers can resolve a reachable IP for this service: default is cluster service DNS name which assumes all routers are inside the same cluster</td></tr><tr><td>ctrlPlane.advertisedPort</td><td>int</td><td><code>443</code></td><td>cluster service, node port, load balancer, and ingress port</td></tr><tr><td>ctrlPlane.alternativeIssuer</td><td>string</td><td><code>nil</code></td><td>kind and name of alternative issuer for the controller&#x27;s identity</td></tr><tr><td>ctrlPlane.containerPort</td><td>int</td><td><code>6262</code></td><td>cluster service target port on the container</td></tr><tr><td>ctrlPlane.dnsNames</td><td>list</td><td><code>[]</code></td><td>additional DNS SANs</td></tr><tr><td>ctrlPlane.ingress.annotations</td><td>string</td><td><code>nil</code></td><td>ingress annotations, e.g., to configure ingress-nginx</td></tr><tr><td>ctrlPlane.ingress.enabled</td><td>bool</td><td><code>false</code></td><td>create an ingress for the cluster service</td></tr><tr><td>ctrlPlane.service.enabled</td><td>bool</td><td><code>true</code></td><td>create a cluster service for the deployment</td></tr><tr><td>ctrlPlane.service.type</td><td>string</td><td><code>&quot;ClusterIP&quot;</code></td><td>expose the service as a ClusterIP, NodePort, or LoadBalancer</td></tr><tr><td>ctrlPlaneCaDir</td><td>string</td><td><code>&quot;ctrl-plane-cas&quot;</code></td><td>read-only mountpoint for run container to read the ctrl plane trust bundle created during init</td></tr><tr><td>ctrlPlaneCasBundle.namespaceSelector</td><td>object</td><td><code>{}</code></td><td>namespaces where trust-manager will create the Bundle resource containing Ziti&#x27;s trusted CA certs (default: empty means all namespaces)</td></tr><tr><td>ctrlPlaneCasFile</td><td>string</td><td><code>&quot;ctrl-plane-cas.crt&quot;</code></td><td>filename of the ctrl plane trust bundle</td></tr><tr><td>dataMountDir</td><td>string</td><td><code>&quot;/persistent&quot;</code></td><td>writeable mountpoint where the controller will create dbFile during init</td></tr><tr><td>dbFile</td><td>string</td><td><code>&quot;ctrl.db&quot;</code></td><td>name of the BoltDB file</td></tr><tr><td>edgeSignerPki.admin_client_cert.duration</td><td>string</td><td><code>&quot;8760h&quot;</code></td><td>admin client certificate duration as Go time.Duration</td></tr><tr><td>edgeSignerPki.admin_client_cert.renewBefore</td><td>string</td><td><code>&quot;720h&quot;</code></td><td>renew admin client certificate before expiry as Go time.Duration</td></tr><tr><td>edgeSignerPki.enabled</td><td>bool</td><td><code>true</code></td><td>generate a separate PKI root of trust for the edge signer CA</td></tr><tr><td>execMountDir</td><td>string</td><td><code>&quot;/usr/local/bin&quot;</code></td><td>a directory included in the init and run containers&#x27; executable search path</td></tr><tr><td>fabric.events.enabled</td><td>bool</td><td><code>false</code></td><td>enable fabric event logger and file handler</td></tr><tr><td>fabric.events.fileName</td><td>string</td><td><code>&quot;fabric-events.json&quot;</code></td><td></td></tr><tr><td>fabric.events.mountDir</td><td>string</td><td><code>&quot;/var/run/ziti&quot;</code></td><td></td></tr><tr><td>fabric.events.subscriptions<!-- -->[0]<!-- -->.type</td><td>string</td><td><code>&quot;fabric.circuits&quot;</code></td><td></td></tr><tr><td>fabric.events.subscriptions<!-- -->[1]<!-- -->.type</td><td>string</td><td><code>&quot;fabric.links&quot;</code></td><td></td></tr><tr><td>fabric.events.subscriptions<!-- -->[2]<!-- -->.type</td><td>string</td><td><code>&quot;fabric.routers&quot;</code></td><td></td></tr><tr><td>fabric.events.subscriptions<!-- -->[3]<!-- -->.type</td><td>string</td><td><code>&quot;fabric.terminators&quot;</code></td><td></td></tr><tr><td>fabric.events.subscriptions<!-- -->[4]<!-- -->.metricFilter</td><td>string</td><td><code>&quot;.*&quot;</code></td><td></td></tr><tr><td>fabric.events.subscriptions<!-- -->[4]<!-- -->.sourceFilter</td><td>string</td><td><code>&quot;.*&quot;</code></td><td></td></tr><tr><td>fabric.events.subscriptions<!-- -->[4]<!-- -->.type</td><td>string</td><td><code>&quot;metrics&quot;</code></td><td></td></tr><tr><td>fabric.events.subscriptions<!-- -->[5]<!-- -->.type</td><td>string</td><td><code>&quot;edge.sessions&quot;</code></td><td></td></tr><tr><td>fabric.events.subscriptions<!-- -->[6]<!-- -->.type</td><td>string</td><td><code>&quot;edge.apiSessions&quot;</code></td><td></td></tr><tr><td>fabric.events.subscriptions<!-- -->[7]<!-- -->.type</td><td>string</td><td><code>&quot;fabric.usage&quot;</code></td><td></td></tr><tr><td>fabric.events.subscriptions<!-- -->[7]<!-- -->.version</td><td>int</td><td><code>3</code></td><td></td></tr><tr><td>fabric.events.subscriptions<!-- -->[8]<!-- -->.type</td><td>string</td><td><code>&quot;services&quot;</code></td><td></td></tr><tr><td>fabric.events.subscriptions<!-- -->[9]<!-- -->.interval</td><td>string</td><td><code>&quot;5s&quot;</code></td><td></td></tr><tr><td>fabric.events.subscriptions<!-- -->[9]<!-- -->.type</td><td>string</td><td><code>&quot;edge.entityCounts&quot;</code></td><td></td></tr><tr><td>highAvailability.mode</td><td>string</td><td><code>&quot;standalone&quot;</code></td><td>Ziti controller HA mode</td></tr><tr><td>highAvailability.replicas</td><td>int</td><td><code>1</code></td><td>Ziti controller HA swarm replicas</td></tr><tr><td>image.args</td><td>list</td><td><code>[&quot;{{ .Values.configMountDir }}/ziti-controller.yaml&quot;]</code></td><td>args for the entrypoint command</td></tr><tr><td>image.command</td><td>list</td><td><code>[&quot;ziti&quot;,&quot;controller&quot;,&quot;run&quot;]</code></td><td>container entrypoint command</td></tr><tr><td>image.homeDir</td><td>string</td><td><code>&quot;/home/ziggy&quot;</code></td><td>homeDir for admin login shell must align with container image&#x27;s ~/.bashrc for ziti CLI auto-complete to work</td></tr><tr><td>image.pullPolicy</td><td>string</td><td><code>&quot;IfNotPresent&quot;</code></td><td>deployment image pull policy</td></tr><tr><td>image.repository</td><td>string</td><td><code>&quot;docker.io/openziti/ziti-controller&quot;</code></td><td>container image repository for app deployment</td></tr><tr><td>image.tag</td><td>string</td><td><code>&quot;&quot;</code></td><td>override the container image tag specified in the chart</td></tr><tr><td>ingress-nginx.controller.extraArgs.enable-ssl-passthrough</td><td>string</td><td><code>&quot;true&quot;</code></td><td>configure subchart ingress-nginx to enable the pass-through TLS feature</td></tr><tr><td>ingress-nginx.enabled</td><td>bool</td><td><code>false</code></td><td>recommended: install the ingress-nginx subchart (may be necessary for managed k8s)</td></tr><tr><td>managementApi.advertisedHost</td><td>string</td><td><code>nil</code></td><td>global DNS name by which routers can resolve a reachable IP for this service</td></tr><tr><td>managementApi.advertisedPort</td><td>int</td><td><code>443</code></td><td>cluster service, node port, load balancer, and ingress port</td></tr><tr><td>managementApi.containerPort</td><td>int</td><td><code>1281</code></td><td>cluster service target port on the container</td></tr><tr><td>managementApi.dnsNames</td><td>list</td><td><code>[]</code></td><td>additional DNS SANs</td></tr><tr><td>managementApi.ingress.annotations</td><td>string</td><td><code>nil</code></td><td>ingress annotations, e.g., to configure ingress-nginx</td></tr><tr><td>managementApi.ingress.enabled</td><td>bool</td><td><code>false</code></td><td>create an ingress for the cluster service</td></tr><tr><td>managementApi.service.enabled</td><td>bool</td><td><code>false</code></td><td>create a cluster service for the deployment</td></tr><tr><td>managementApi.service.type</td><td>string</td><td><code>&quot;ClusterIP&quot;</code></td><td>expose the service as a ClusterIP, NodePort, or LoadBalancer</td></tr><tr><td>nodeSelector</td><td>object</td><td><code>{}</code></td><td>deployment template spec node selector</td></tr><tr><td>persistence.VolumeName</td><td>string</td><td><code>nil</code></td><td>PVC volume name</td></tr><tr><td>persistence.accessMode</td><td>string</td><td><code>&quot;ReadWriteOnce&quot;</code></td><td>PVC access mode: ReadWriteOnce (concurrent mounts not allowed), ReadWriteMany (concurrent allowed)</td></tr><tr><td>persistence.annotations</td><td>object</td><td><code>{}</code></td><td>annotations for the PVC</td></tr><tr><td>persistence.enabled</td><td>bool</td><td><code>true</code></td><td>required: place a storage claim for the BoltDB persistent volume</td></tr><tr><td>persistence.existingClaim</td><td>string</td><td><code>&quot;&quot;</code></td><td>A manually managed Persistent Volume and Claim Requires persistence.enabled=true. If defined, PVC must be created manually before volume will be bound.</td></tr><tr><td>persistence.size</td><td>string</td><td><code>&quot;2Gi&quot;</code></td><td>2GiB is enough for tens of thousands of entities, but feel free to make it larger</td></tr><tr><td>persistence.storageClass</td><td>string</td><td><code>nil</code></td><td>Storage class of PV to bind. By default it looks for the default storage class. If the PV uses a different storage class, specify that here.</td></tr><tr><td>podAnnotations</td><td>object</td><td><code>{}</code></td><td>annotations to apply to all pods deployed by this chart</td></tr><tr><td>podSecurityContext</td><td>object</td><td><code>{&quot;fsGroup&quot;:2171}</code></td><td>deployment template spec security context</td></tr><tr><td>podSecurityContext.fsGroup</td><td>int</td><td><code>2171</code></td><td>the GID of the group that should own any files created by the container, especially the BoltDB file</td></tr><tr><td>prometheus.advertisedHost</td><td>string</td><td><code>&quot;&quot;</code></td><td>DNS name to advertise in place of the default internal cluster name built from the Helm release name</td></tr><tr><td>prometheus.advertisedPort</td><td>int</td><td><code>443</code></td><td>cluster service, node port, load balancer, and ingress port</td></tr><tr><td>prometheus.containerPort</td><td>int</td><td><code>9090</code></td><td>cluster service target port on the container</td></tr><tr><td>prometheus.service.annotations</td><td>object</td><td><code>{}</code></td><td></td></tr><tr><td>prometheus.service.enabled</td><td>bool</td><td><code>false</code></td><td>create a cluster service for the deployment</td></tr><tr><td>prometheus.service.labels</td><td>object</td><td><code>{}</code></td><td></td></tr><tr><td>prometheus.service.type</td><td>string</td><td><code>&quot;ClusterIP&quot;</code></td><td>expose the service as a ClusterIP, NodePort, or LoadBalancer</td></tr><tr><td>resources</td><td>object</td><td><code>{}</code></td><td>deployment container resources</td></tr><tr><td>securityContext</td><td>object</td><td><code>{}</code></td><td>deployment container security context</td></tr><tr><td>spireAgent.enabled</td><td>bool</td><td><code>false</code></td><td>if you are running a container with the spire-agent binary installed then this will allow you to add the hostpath necessary for connecting to the spire socket</td></tr><tr><td>spireAgent.spireSocketMnt</td><td>string</td><td><code>&quot;/run/spire/sockets&quot;</code></td><td>file path of the spire socket mount</td></tr><tr><td>tolerations</td><td>list</td><td><code>[]</code></td><td>deployment template spec tolerations</td></tr><tr><td>trust-manager.app.trust.namespace</td><td>string</td><td><code>&quot;ziti&quot;</code></td><td>trust-manager needs to be configured to trust the namespace in which the controller is deployed so that it will create the Bundle resource for the ctrl plane trust bundle</td></tr><tr><td>trust-manager.crds.enabled</td><td>bool</td><td><code>false</code></td><td>CRDs must be applied in advance of installing the parent chart</td></tr><tr><td>trust-manager.enabled</td><td>bool</td><td><code>false</code></td><td>install the trust-manager subchart to provide CRD Bundle</td></tr><tr><td>webBindingPki.enabled</td><td>bool</td><td><code>true</code></td><td>generate a separate PKI root of trust for web bindings, i.e., client, management, and prometheus APIs</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="todos">TODO&#x27;s<a href="#todos" class="hash-link" aria-label="Direct link to TODO&#x27;s" title="Direct link to TODO&#x27;s">â</a></h2><ul><li>replicas - Each controller replica needs to be it&#x27;s own HA member. We have to wait until HA <a href="https://github.com/openziti/ziti/blob/release-next/doc/ha/overview.md" target="_blank" rel="noopener noreferrer">https://github.com/openziti/ziti/blob/release-next/doc/ha/overview.md</a> is officially released.</li><li>lower CA / Cert lifetime; how to refresh stuff when Certs are updated?</li><li>Deploy Prometheus scraper configuration when <code>prometheus.enabled = true</code></li><li>cert-manager allows issuing only one cert per key, i.e., ClientCertKeyReuseIssue prevents us from issuing a user cert and server cert backed by same private key, hence the controller config.yaml re-uses server certs in place of user certs to allow startup and testing to continue</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/openziti/ziti-doc/tree/main/docusaurus/docs/guides/kubernetes/hosting/kubernetes-controller.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/hosting-openziti"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Hosting OpenZiti</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/guides/kubernetes/hosting/kubernetes-router"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Router</div></a></nav></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a class="footer__link-item" href="/policies/CODE_OF_CONDUCT">Policies</a><span class="footer__link-separator">Â·</span><a href="https://netfoundry.io/pricing/" target="_blank" rel="noopener noreferrer" class="footer__link-item">CloudZiti</a><span class="footer__link-separator">Â·</span><a href="https://blog.openziti.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 NetFoundry Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.3c8b2fbb.js"></script>
<script src="/assets/js/main.47ca3b21.js"></script>
</body>
</html>